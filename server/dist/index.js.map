{"version":3,"sources":["../src/index.js"],"names":["process","env","JWT_SECRET","err","Error","console","error","app","mongoose","connect","config","uri","useMongoClient","catch","Promise","global","use","bodyParser","json","urlencoded","extended","get","req","res","send","post","Authentication","signup","signin","Middlewares","loginRequired","UserRouter","next","log","message","status","port","PORT","http","createServer","listen"],"mappings":";;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAG,CAACA,QAAQC,GAAR,CAAYC,UAAhB,EAA4B;AACxB,QAAMC,MAAM,IAAIC,KAAJ,CAAU,+BAAV,CAAZ;AACAC,YAAQC,KAAR,CAAcH,GAAd;AACH;;AAED,IAAMI,MAAM,wBAAZ;;AAEAC,mBAASC,OAAT,CAAiBC,iBAAOF,QAAP,CAAgBG,GAAjC,EAAsC,EAAEC,gBAAgB,IAAlB,EAAtC,EACCC,KADD,CACO;AAAA,WAAKR,QAAQC,KAAR,CAAcH,GAAd,CAAL;AAAA,CADP;;AAGAK,mBAASM,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA;AACAP,IAAIS,GAAJ,CAAQ,qBAAR;AACAT,IAAIS,GAAJ,CAAQ,sBAAO,KAAP,CAAR;AACAT,IAAIS,GAAJ,CAAQC,qBAAWC,IAAX,EAAR;AACAX,IAAIS,GAAJ,CAAQC,qBAAWE,UAAX,CAAsB,EAACC,UAAU,KAAX,EAAtB,CAAR;AACAb,IAAIc,GAAJ,CAAQ,OAAR,EAAiB,UAACC,GAAD,EAAMC,GAAN;AAAA,WAAcA,IAAIC,IAAJ,CAAS,MAAT,CAAd;AAAA,CAAjB;AACAjB,IAAIc,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN;AAAA,WAAcA,IAAIL,IAAJ,CAAS,EAAC,UAAU,gBAAX,EAAT,CAAd;AAAA,CAAb;AACAX,IAAIkB,IAAJ,CAAS,SAAT,EAAoBC,yBAAeC,MAAnC;AACApB,IAAIkB,IAAJ,CAAS,SAAT,EAAoBC,yBAAeE,MAAnC;AACArB,IAAIc,GAAJ,CAAQ,YAAR,EAAsBQ,sBAAYC,aAAlC,EAAiD,UAACR,GAAD,EAAMC,GAAN;AAAA,WAAcA,IAAIC,IAAJ,CAAS,WAAT,CAAd;AAAA,CAAjD;AACAjB,IAAIS,GAAJ,CAAQ,OAAR,EAAiBa,sBAAYC,aAA7B,EAA4CC,gBAA5C;;AAEAxB,IAAIS,GAAJ,CAAQ,UAACb,GAAD,EAAMmB,GAAN,EAAWC,GAAX,EAAgBS,IAAhB,EAAyB;AAC7B3B,YAAQ4B,GAAR,CAAY,QAAZ,EAAsB9B,IAAI+B,OAA1B;AACAX,QAAIY,MAAJ,CAAW,GAAX,EAAgBjB,IAAhB,CAAqBf,IAAI+B,OAAzB;AACH,CAHD;;AAKA;AACA,IAAME,OAAOpC,QAAQC,GAAR,CAAYoC,IAAZ,IAAoB,IAAjC;AACAC,eAAKC,YAAL,CAAkBhC,GAAlB,EAAuBiC,MAAvB,CAA8BJ,IAA9B,EAAoC,YAAI;AACpC/B,YAAQ4B,GAAR,uCAAgDG,IAAhD;AACH,CAFD","file":"index.js","sourcesContent":["\nimport express from 'express';\nimport http from 'http';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport mongoose from 'mongoose';\nimport cors from 'cors';\nimport config from './config';\nimport Middlewares from './api/middlewares'\nimport Authentication from './api/authentication'\nimport UserRouter from './user/router'\n\nif(!process.env.JWT_SECRET) {\n    const err = new Error('No JWT_SECRET in env variable');\n    console.error(err);\n}\n\nconst app = express();\n\nmongoose.connect(config.mongoose.uri, { useMongoClient: true })\n.catch(err=>console.error(err));\n\nmongoose.Promise = global.Promise;\n\n// App Setup\napp.use(cors());\napp.use(morgan('dev'));\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({extended: false}));\napp.get('/ping', (req, res) => res.send('pong'))\napp.get('/', (req, res) => res.json({'source': 'MERN Stack App'}))\napp.post('/signup', Authentication.signup)\napp.post('/signin', Authentication.signin)\napp.get('/auth-ping', Middlewares.loginRequired, (req, res) => res.send('connected'))\napp.use('/user', Middlewares.loginRequired, UserRouter)\n\napp.use((err, req, res, next) => {\n    console.log('Error:', err.message);\n    res.status(422).json(err.message);\n});\n\n// Server Setup\nconst port = process.env.PORT || 8000\nhttp.createServer(app).listen(port, ()=>{\n    console.log(`\\x1b[32m`, `Server listening on: ${port}`, `\\x1b[0m`)\n});\n"]}